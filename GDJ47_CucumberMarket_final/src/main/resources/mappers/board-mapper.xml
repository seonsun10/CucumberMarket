<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">
	<resultMap type="board" id="boardMap">
		<id column="boardid" property="boardId"/>
		<result column="userid" property="userId"/>
		<result column="boardcategory" property="boardCategory"/>
		<result column="boardtitle" property="boardTitle"/>
		<result column="boardcontent" property="boardContent"/>
		<result column="picname" property="picName"/>
		<result column="createdate" property="createDate"/>
		<result column="recommendcount" property="recommendCount"/>
	</resultMap>
	<resultMap type="com.cu.cum.board.model.vo.RecommendList" id="recommendMap">
		<result property="recUserId" column="rec_userid"/>
		<result property="recBoardId" column="rec_boardid"/>
	
	</resultMap>
	
	<select id="selectboardlist" resultMap="boardMap">
	
	select * from board order by createdate desc
	</select>
	<insert id="insertboard" parameterType="board" >
	insert into board values(seq_boardid.nextval,#{userId},#{boardCategory},#{boardTitle},#{boardContent},null,sysdate,0)
	</insert>
	<select id="selectboard" parameterType="_int" resultMap="boardMap">
	select * from board where boardid=#{boardId}
	</select>
	<select id="selectboardcount" resultType="_int">
	select count(*) from board
	</select>
	
	<select id="selectboardlist2" resultMap="boardMap">
	
	select * from board where boardcategory=#{category}
	</select>
	<select id="selectboardcount2" resultType="_int">
	select count(*) from board where boardcategory=#{category}
	</select>
	<select id="recommendcheck" parameterType="com.cu.cum.board.model.vo.RecommendList" resultType="_int">
	select count(*) from recommendlist where rec_userid=#{recUserId} and rec_boardid=#{recBoardId}
	</select>
	<insert id="recommendboard" parameterType="recommend" >
	insert into recommendlist values(#{recUserId},#{recBoardId})
	</insert> 
	<select id="recommendidcount" parameterType="_int" resultType="_int">
	select count(*) from recommendlist where rec_boardid=#{BoardId}
	</select>
	<update id="updateboard" parameterType="board" >
	update board set recommendcount =#{recommendCount} where boardid=#{boardId} 
	</update>
	
	
	
	

</mapper>